<!-- vault-create.component.html -->
<div class="vault-create-container">
  <div class="card">
    <h2>Create New Vault</h2>
    
    <div *ngIf="!isConnected" class="connect-wallet-prompt">
      <p>Please connect your wallet to create a vault</p>
      <button (click)="connectWallet()" class="connect-button">
        Connect Wallet
      </button>
    </div>

    <div *ngIf="isConnected" class="form-container">
      <form [formGroup]="createForm" (ngSubmit)="onSubmit()" class="vault-form">
        <div class="form-group">
          <label>Name</label>
          <input formControlName="name" type="text" placeholder="Vault name">
          <div *ngIf="createForm.controls['name'].invalid && createForm.controls['name'].touched" class="error">
            Name is required and must be at least 3 characters
          </div>
        </div>

        <div class="form-group">
          <label>Description</label>
          <textarea formControlName="description" placeholder="Vault description"></textarea>
          <div *ngIf="createForm.controls['description'].invalid && createForm.controls['description'].touched" class="error">
            Description is required
          </div>
        </div>

        <div class="form-group">
          <label>Category</label>
          <select formControlName="category">
            <option value="">Select category</option>
            <option value="savings">Savings</option>
            <option value="charity">Charity</option>
            <option value="project">Project Funding</option>
            <option value="personal">Personal</option>
          </select>
          <div *ngIf="createForm.controls['category'].invalid && createForm.controls['category'].touched" class="error">
            Please select a category
          </div>
        </div>

        <div class="form-group">
          <label>Image URI</label>
          <input formControlName="imageURI" type="text" placeholder="https://example.com/image.png ">
          <div *ngIf="createForm.controls['imageURI'].invalid && createForm.controls['imageURI'].touched" class="error">
            Image URI is required
          </div>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" formControlName="isPublic">
            Public Vault
          </label>
        </div>

        <div class="form-group">
          <label>Target Amount (ETH)</label>
          <input formControlName="target" type="number" step="any" min="0.0001" placeholder="0.5">
          <div *ngIf="createForm.controls['target'].invalid && createForm.controls['target'].touched" class="error">
            Target amount must be at least 0.0001 ETH
          </div>
        </div>

        <div *ngIf="error" class="error-message">{{error}}</div>
        <div *ngIf="successMessage" class="success-message">{{successMessage}}</div>

        <button type="submit" [disabled]="createForm.invalid || isLoading" class="submit-button">
          {{isLoading ? 'Creating...' : 'Create Vault'}}
        </button>
      </form>
    </div>
  </div>
</div>